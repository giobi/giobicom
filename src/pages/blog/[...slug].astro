---
import Layout from '@/layouts/Layout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import { getCollection } from 'astro:content';
import '../../styles/global.css';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout 
  title={`${post.data.title} - Blog giobi.com`}
  description={post.data.description}
>
  <Header slot="header" />
  
  <article class="section-padding bg-black">
    <div class="container-custom max-w-4xl">
      <!-- Post Header -->
      <header class="mb-12 text-center">
        <h1 class="text-4xl font-bold mb-4 text-green-300 uppercase tracking-wider">
          {post.data.title}
        </h1>
        <div class="text-green-500 font-mono mb-6">
          {post.data.date.toLocaleDateString('it-IT')} - {post.data.author}
        </div>
        <div class="flex flex-wrap justify-center gap-2">
          {post.data.tags.map((tag) => (
            <span class="px-3 py-1 border border-green-400 text-green-400 text-sm font-mono uppercase">
              {tag}
            </span>
          ))}
        </div>
      </header>

      <!-- Post Content -->
      <div class="prose prose-invert prose-green max-w-none">
        <Content />
      </div>

      <!-- Navigation -->
      <nav class="mt-12 pt-8 border-t border-green-400">
        <a href="/giobicom25/blog" class="text-green-300 hover:text-green-200 font-mono uppercase tracking-wider">
          &lt; Torna al Blog
        </a>
      </nav>
    </div>
  </article>

  <Footer slot="footer" />
</Layout>

<style>
  .prose {
    color: theme('colors.green.500');
  }
  
  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    color: theme('colors.green.300');
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .prose pre {
    background-color: theme('colors.gray.900');
    border: 1px solid theme('colors.green.400');
  }
  
  .prose code {
    color: theme('colors.green.400');
    background-color: theme('colors.gray.900');
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
  }
  
  .prose pre code {
    background-color: transparent;
    padding: 0;
    border-radius: 0;
  }
  
  .prose a {
    color: theme('colors.green.300');
    text-decoration: underline;
  }
  
  .prose a:hover {
    color: theme('colors.green.200');
  }
  
  .prose strong {
    color: theme('colors.green.300');
  }
  
  .prose ul,
  .prose ol {
    color: theme('colors.green.500');
  }
  
  .prose blockquote {
    border-left: 4px solid theme('colors.green.400');
    background-color: theme('colors.gray.900');
    color: theme('colors.green.500');
    font-style: italic;
  }
</style>